---
title: "Simulación de Base de Datos"
format: html
editor: visual
---

### Simulación de Base de Datos Académica (n = 1000)

## Objetivo

Generar una base de datos simulada (n = 1000) con las variables: **id, nota, laboratorio, procedencia, tercio, edad, genero**, y realizar verificaciones rápidas (resumenes y proporciones) para validar las distribuciones.

## 1. Parámetros y estructura base

```{r}
#| label: parametros
#| echo: true
# Tamaño de la muestra
n <- 1000

# ID secuencial
id <- 1:n
```

## 2. Generación de variables

### 2.1 Nota (9 a 20, entera, aleatoria)

```{r}
#| label: var-nota
#| echo: true
# Nota: entero entre 9 y 20 (ambas inclusive)
nota <- sample(9:20, size = n, replace = TRUE)


```

### 2.2 Laboratorio

-   0 = miércoles

-   1 = sábado

    (Distribución 50 / 50)

```{r}
#| label: var-lab
#| echo: true
laboratorio <- sample(c(0, 1), size = n, replace = TRUE, prob = c(0.5, 0.5))


```

### 2.3 Género (60% mujeres, 40% varones)

-   0 = mujer

-   1 = varón

```{r}
#| label: var-genero
#| echo: true
genero <- sample(c(0, 1), size = n, replace = TRUE, prob = c(0.6, 0.4))

```

### 2.4 Edad (19–25) con probabilidades específicas según la INE

```{r}
#| label: var-edad
#| echo: true
edad_vals  <- 19:25
edad_probs <- c(0.14, 0.16, 0.18, 0.18, 0.15, 0.13, 0.12)  


```

### 2.5 Procedencia (25% cada uno)

-   0 = Conp Centro

-   1 = Cono Sur

-   2 = Cono Este

-   3 = Cono Norte

```{r}
#| label: var-procedencia
#| echo: true
procedencia <- sample(0:3, size = n, replace = TRUE, prob = rep(0.25, 4))
```

### 2.6 Tercio (0, 1, 2 con igual probabilidad)

```{r}
#| label: var-tercio
#| echo: true
# Muestra con igual probabilidad (aprox. 1/3 cada grupo)
tercio <- sample(0:2, size = n, replace = TRUE, prob = c(1/3, 1/3, 1/3))
```

## 3. Construcción del `data.frame` final

```{r}
#| label: construir-bd
#| echo: true
bd <- data.frame(
  id           = id,
  nota         = nota,        # 9..20
  laboratorio  = laboratorio, # 0/1
  procedencia  = procedencia, # 0..3
  tercio       = tercio,      # 0..2
  edad         = edad,        # 19..25
  genero       = genero       # 0=Mujer, 1=Varón
)

# Vista rápida
head(bd, 10)
```

## 4. Verificaciones y control de calidad

### 4.1 Resumen estadístico

```{r}
#| label: resumen
#| echo: true
summary(bd)

```

### 4.2 Proporciones por variable categórica

```{r}
#| label: proporciones
#| echo: true
list(
  prop_nota        = prop.table(table(bd$nota)),        # distribución de notas
  prop_laboratorio = prop.table(table(bd$laboratorio)), # ~50/50
  prop_genero      = prop.table(table(bd$genero)),      # ~60% mujeres, 40% varones
  prop_edad        = prop.table(table(bd$edad)),        # según edad_probs
  prop_procedencia = prop.table(table(bd$procedencia)), # ~25% por categoría
  prop_tercio      = prop.table(table(bd$tercio))       # ~1/3 por categoría
)

```

## 5. (Opcional) Guardado de resultados

```{r}

library(openxlsx)

# Crear un archivo Excel con la base de datos
write.xlsx(bd, file = "base_simulada.xlsx", overwrite = TRUE)

cat("\n✅ Archivo 'base_simulada.xlsx' guardado correctamente en el directorio de trabajo.\n")

```
